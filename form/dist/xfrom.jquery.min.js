function xAutoComplete(t){this.opts=t||{},this.eles={$selector:null,$ul:null}}function _getValue(t,e){return"string"==typeof t?t:e?t[e]||t:t}function xCheckbox(t){this.opts=t||{},this.eles={}}function xCombo(t){this.opts={},this.eles={},this.selectedItems=[],this.isFirstTime=!0}function xDate(t){this.opts=t||{},this.eles={}}function xMonth(t){this.opts=t||{},this.eles={}}function xPupSelect(t){this.opts={},t&&(this.opts=t)}function xRadio(t){this.opts=t||{},this.eles={}}function xSelect(t){this.opts=t||{},this.eles={$selector:null,$ul:null}}function xYear(t){this.opts=t||{},this.eles={}}xAutoComplete.prototype.render=function(t){var e=this;this.opts=t;var o=t.selector;t.tField||"text",t.vField||"value",t.vField||"parent",t.subNode,t.value||"",t.isMultiSelect||"N",t.data,t.onFilter,t.onSelect,t.onShow,t.onHide,t.onLoadData;this.eles.$ul=jQuery("<ul></ul"),o.append(this.eles.$ul),this.eles.$text=jQuery(">input",o),this.eles.$selector=o,this.eles.$hValue=jQuery('<input type="hidden" />');var s=this.eles.$text.attr("name");s&&(this.eles.$hValue.attr("name",s),this.eles.$text.attr("name",s+"Desc")),this.eles.$hValue.val(this.opts.value),o.append(this.eles.$hValue),this.eles.$selector.on("click",function(t){var o=e.eles.$ul.is(":visible");o?e.hide():e.show(),""==e.getText()?e.loadData(""):e.renderItems(e.opts.data,function(t){return _getValue(t,e.opts.tField).indexOf(e.getText())>-1}),t.stopPropagation()}),this.eles.$text.keyup(function(t){var o=jQuery(this).val();e.eles.$ul.show(),e.loadData(o)}),this.eles.$ul.hover(function(){},function(){e.hide()})},xAutoComplete.prototype.clearLi=function(){this.eles.$ul.empty()},xAutoComplete.prototype.hide=function(){this.onHide(),this.eles.$ul.hide()},xAutoComplete.prototype.show=function(){this.onShow(),this.eles.$ul.show()},xAutoComplete.prototype.onShow=function(){var onShow=this.opts.onShow;"function"==typeof this.opts.onShow?this.opts.onShow.call(this,me.getValue(),me.getText()):onShow&&eval(onShow+".call(this,this.getValue(),this.getText())")},xAutoComplete.prototype.onSelect=function(){var onSelect=this.opts.onSelect;"function"==typeof this.opts.onSelect?this.opts.onSelect.call(this,me.getValue(),me.getText()):onSelect&&eval(onSelect+".call(this,this.getValue(),this.getText())")},xAutoComplete.prototype.onHide=function(){var onHide=this.opts.onHide;"function"==typeof this.opts.onHide?this.opts.onHide.call(this,me.getValue(),me.getText()):onHide&&eval(onHide+".call(this,this.getValue(),this.getText())")},xAutoComplete.prototype.getValue=function(){return this.eles.$hValue.val()},xAutoComplete.prototype.getText=function(){return this.eles.$text.val()},xAutoComplete.prototype.setValue=function(t,e){var o=this;if(void 0!=t&&this.eles.$hValue.val(t),void 0!=e)this.eles.$text.val(e);else{if(!(this.opts&&this.opts.data&&this.opts.data.length>0))return;for(var s=0;s<this.opts.data.length;s++){var n=this.opts.data[s],e=_getValue(n,o.opts.tField);return void this.eles.$text.val(e)}}},xAutoComplete.prototype.renderItems=function(t,e){var o=this;if(this.eles.$ul.empty(),this.opts&&this.opts.data&&this.opts.data.length>0)for(var s=0;s<this.opts.data.length;s++){var n=this.opts.data[s];e&&0==e(n)||!function(t){var e=o.renderItem(t);o.eles.$ul.append(e)}(n)}},xAutoComplete.prototype.renderItem=function(item){var me=this,$content,renderItem=this.opts.renderItem;if("function"==typeof this.opts.renderItem)$content=this.opts.renderItem.call(this,item);else if(renderItem)eval("$content= "+renderItem+".call(this,item)");else{$content=jQuery("<div></div>");var text=_getValue(item,this.opts.tField),value=_getValue(item,this.opts.vField);$content.html(text),$content.attr("value",value)}var $li=jQuery("<li></li>");return $li.click(function(t){me.setValue(value,text),me.hide(),t.stopPropagation()}),"string"==typeof $content?$li.html($content):$li.append($content)},xAutoComplete.prototype.onItemClick=function(t){_getValue(t,this.opts.tField),_getValue(t,this.opts.vField)},xAutoComplete.prototype.loadData=function(){var me=this;me.clearLi(),this.eles.$ul.append("<li>loadding...</li>");var loadData=this.opts.loadData;"function"==typeof this.opts.loadData?this.opts.loadData.call(this,me.getText()):loadData?eval(" "+loadData+".call(this,this.getText())"):this.renderItems(this.opts.data,function(t){return _getValue(t,me.opts.tField).indexOf(me.getText())>-1})},xAutoComplete.prototype.refresh=function(t){this.opts.data=t,this.renderItems(t)},"undefined"==typeof window.xUi&&(window.xUi={}),window.xUi.autocomplete=function(window){var controls=[],members={get:function(t){if("number"==typeof t)return controls[t];if("string"==typeof t)t=jQuery(t);else for(var e=0;e<controls.length;e++){var o=controls[e];if(o.opts.selector&&jQuery(o.opts.selector)[0]==jQuery(t)[0])return o}return null},render:function(selector,opts){selector||(selector=".autocomplete"),opts||(opts={});var me=this;jQuery(selector).each(function(item){var $selector=jQuery(this),newOpts={};for(var item in opts)newOpts.item=opts[item];newOpts.tField=$selector.attr("tField"),newOpts.vField=$selector.attr("vField"),newOpts.onShow=$selector.attr("onShow"),newOpts.onHide=$selector.attr("onHide"),newOpts.onSelect=$selector.attr("onSelect"),newOpts.loadData=$selector.attr("loadData"),newOpts.renderItem=$selector.attr("renderItem");var _data={};eval("(_data={data:"+($selector.attr("data")||"[]")+"})"),newOpts.data=_data.data,newOpts.selector=$selector;var xautocomplete=new xAutoComplete(newOpts);controls.push(xautocomplete),xautocomplete.render(newOpts)})}};return members}(window),xCheckbox.prototype.render=function(t){var e=this;this.opts=t||this.opts;var o=t.selector;this.eles.$selector=o,this.eles.$checkbox=jQuery(">label>input[type=checkbox]",o),this.eles.$label=jQuery(">label:first",o),this.opts.isChceked=this.eles.$checkbox.is(":checked"),this.eles.$checkbox.click(function(t){var o=jQuery(this).is(":checked");e.setValue(o),t.stopPropagation()}),this.setValue(this.opts.isChceked)},xCheckbox.prototype.getValue=function(){return this.eles.$checkbox.is(":checked")},xCheckbox.prototype.setValue=function(t){this.eles.$label.removeClass("checked"),1==t&&this.eles.$label.addClass("checked"),this.eles.$checkbox.prop("checked",t),this.onSelect(t)},xCheckbox.prototype.onSelect=function(item){var onSelect=this.opts.onSelect;"function"==typeof this.opts.onSelect?this.opts.onSelect.call(this,me.getValue()):onSelect&&eval(onSelect+".call(this,this.getValue())")},"undefined"==typeof window.xUi&&(window.xUi={}),window.xUi.checkbox=function(){var t=[],e={get:function(e){if("number"==typeof e)return t[e];if("string"==typeof e)e=jQuery(e);else for(var o=0;o<t.length;o++){var s=t[o];if(s.opts.selector&&jQuery(s.opts.selector)[0]==jQuery(e)[0])return s}return null},render:function(e,o){e||(e=".checkbox"),o||(o={});jQuery(e).each(function(e){var s=jQuery(this),n={};for(var e in o)n.item=o[e];n.onSelect=s.attr("onSelect"),n.selector=s;var r=new xCheckbox(n);t.push(r),r.render(n)})}};return e}(),xCombo.prototype.render=function(opts){var me=this;this.opts=opts;var $selector=opts.selector,tField=opts.tField||"text",vField=opts.vField||"value",pField=opts.vField||"parent",subNode=opts.subNode,value=opts.value||"",isMultiSelect=opts.isMultiSelect||"N",data=opts.data,onFilter=opts.onFilter,onSelect=opts.onSelect,onShow=opts.onShow,onHide=opts.onHide,onLoadData=opts.onLoadData;this.eles.$ul=jQuery("<ul></ul"),$selector.append(this.eles.$ul),this.eles.$text=jQuery(">input",$selector),this.eles.$selector=$selector,this.eles.$hValue=jQuery('<input type="hidden" />');var name=this.eles.$text.attr("name");name&&(this.eles.$hValue.attr("name",name),this.eles.$text.attr("name",name+"Desc")),this.eles.$hValue.val(this.opts.value),$selector.append(this.eles.$hValue),this.eles.$selector.on("click",function(t){var e=me.eles.$ul.is(":visible");e?me.hide():me.show(),t.stopPropagation()}),this.eles.$text.keyup(function(t){var e=jQuery(this).val();me.selectedItems=[],me.clearValue(),me.renderItems(me.opts.data,function(t,o){return me.getParentFilterExpress(t)&&o.indexOf(e)>-1})}),this.eles.$ul.hover(function(){},function(){me.hide()}),this.opts.onLoadData?(this.eles.$ul.append("<li>数据加载中...</li>"),eval(this.opts.onLoadData+".call(this)")):(this.setValue(value),this.renderItems(opts.data))},xCombo.prototype.onFilter=function(t){return!0},xCombo.prototype.isMultiSelect=function(){return"Y"==this.opts.isMultiSelect},xCombo.prototype.getData=function(){return[]},xCombo.prototype.refresh=function(t){this.opts.data=t,this.eles.$ul.append("<li>数据加载中...</li>"),this.setValue(this.getValue()),this.renderItems(t)},xCombo.prototype.renderItems=function(t,e){if(t&&0!=t.length){var o=this;this.eles.$ul.empty();for(var s=0;s<t.length;s++){var n=t[s];!function(t){var s,n,r;if("string"==typeof t?s=n=t:(s=t[o.opts.tField],n=t[o.opts.vField],r=t[o.opts.pField]),!e||0!=e(t,s)){var i=jQuery("<li></li>");o.opts.renderItem&&i.append(o.opts.renderItem(t,s)),o.isMultiSelect()&&i.addClass("item"),i.html(s),i.attr("value",n),i.attr(o.opts.pField,r),i.click(function(e){if(n!=o.getValue()){if("Y"==o.opts.isMultiSelect){var r=i.hasClass("active");r?(o.removeItem(t),i.removeClass("active")):(o.addItem(t),i.addClass("active"))}else o.hide(),o.selectedItems=[],i.siblings().removeClass("active"),i.addClass("active"),o.setValue(n,s);e.stopPropagation()}}),jQuery.inArray(t,o.selectedItems)>-1&&i.addClass("active"),o.eles.$ul.append(i)}}(n)}}},xCombo.prototype.show=function(){this.FilterForParent(),this.eles.$ul.show()},xCombo.prototype.hide=function(){this.eles.$selector.attr("isValid",this.selectedItems.length>0?"Y":"N"),this.eles.$ul.hide()},xCombo.prototype.getValue=function(){return this.eles.$hValue.val()},xCombo.prototype.addItem=function(t){this.selectedItems.push(t),this.renderValue()},xCombo.prototype.removeItem=function(t){for(var e=0;e<this.selectedItems.length;e++){var o=this.selectedItems[e];o==t&&this.selectedItems.splice(e,1)}this.renderValue()},xCombo.prototype.selectedItems=[],xCombo.prototype.setValue=function(t,e){var o=this;if(e&&this.eles.$text.val(e),this.opts&&this.opts.data)for(var s=0;s<this.opts.data.length;s++){var n,r=this.opts.data[s];n="string"==typeof r?r:r[o.opts.vField],n&&t.toString().indexOf(n.toString())>-1&&this.selectedItems.push(r)}this.renderValue()},xCombo.prototype.clearValue=function(){this.eles.$hValue.val(""),this.setSubCombo()},xCombo.prototype.renderValue=function(){for(var t=this,e=[],o=[],s=0;s<this.selectedItems.length;s++){var n,r,i=this.selectedItems[s];"string"==typeof i?r=n=i:(r=i[t.opts.tField],n=i[t.opts.vField]),e.push(r),o.push(n)}this.eles.$text.val(e.join(",")),this.eles.$hValue.val(o.join(",")),this.opts.onSelect&&this.opts.onSelect.call(this),this.setSubCombo()},xCombo.prototype.getParentFilterExpress=function(t){if($parentNode=jQuery(".combo[id="+this.eles.$selector.attr("pId")+"]"),$parentNode&&$parentNode.length>0){var e=xUi.combo.get($parentNode);if(e){var o=e.getValue(),s=this.opts.pField;return o.toString().indexOf(t[s])>-1}}return!0},xCombo.prototype.FilterForParent=function(){var t=this;this.renderItems(this.opts.data,function(e){return t.getParentFilterExpress(e)})},xCombo.prototype.isFirstTime=!0,xCombo.prototype.setSubCombo=function(){if(this.isFirstTime)return void(this.isFirstTime=!1);var t=this;if($subNode=jQuery(".combo[pId="+this.eles.$selector.attr("id")+"]"),$subNode&&$subNode.length>0){var e=xUi.combo.get($subNode);if(e){var o=(this.getValue(),$subNode.attr("pField"));e.renderItems(e.opts.data,function(e){return e[o]==t.getValue()}),e.selectedItems=[],e.setValue("")}}},"undefined"==typeof window.xUi&&(window.xUi={}),window.xUi.combo=function(){var combos=[],members={get:function(t){if("number"==typeof t)return combos[t];if("string"==typeof t)t=jQuery(t);else for(var e=0;e<combos.length;e++){var o=combos[e];if(o.opts.selector&&jQuery(o.opts.selector)[0]==jQuery(t)[0])return o}return null},render:function(selector){selector||($selectors=jQuery(".combo"));for(var me=this,i=0;i<$selectors.length;i++)!function(i){var seletor=$selectors[i],$seletor=jQuery(seletor),opts={};opts.selector=$seletor,opts.tField=$seletor.attr("tField");var _data={};eval("(_data={data:"+($seletor.attr("data")||"[]")+"})"),opts.data=_data.data,opts.vField=$seletor.attr("vField"),opts.onLoadData=$seletor.attr("onLoadData"),opts.pField=$seletor.attr("pField"),opts.subNode=$seletor.attr("subNode"),opts.value=$seletor.attr("value")||jQuery(">input:first",$seletor).val(),opts.isMultiSelect=$seletor.attr("isMultiSelect");var xcombox=new xCombo;opts.onSelect=function(){var me=this,onSelect=this.eles.$selector.attr("onSelect");onSelect&&eval(onSelect+".call($seletor,me.getValue(),me.getText())")},combos.push(xcombox),xcombox.render(opts)}(i)}};return members}();var _getSelector=function(t){return"string"==typeof t?jQuery(t):t};xDate.prototype.weeks=["一","二","三","四","五","六","日"],xDate.prototype.dates=["年","月","日"],xDate.prototype.render=function(t){this.opts=t||{};var e=this,o=_getSelector(t.selector);this.eles.$selector=o,this.eles.$date=jQuery('<div class="body"></div>'),this.eles.$text=jQuery("input:first",o),this.eles.$text.attr("readonly","readonly"),this.opts.value&&this.setValue(this.opts.value),this.opts.value=this.opts.value||this.getValue(),this.eles.$date.click(function(t){t.stopPropagation()}),this.eles.$selector.append(this.eles.$date),o.click(function(t){var o=jQuery(this).attr("isShow");"Y"==o?e.hide():e.show(),t.stopPropagation()})},xDate.prototype.show=function(){this.eles.$date.show(),this.renderHeader(),this.renderContent(this.getValue()),this.renderFooter(),this.eles.$selector.attr("isShow","Y")},xDate.prototype.hide=function(){this.eles.$date.empty(),this.eles.$date.hide(),this.eles.$selector.attr("isShow","N")},xDate.prototype.getCurrentDateText=function(t){var e=t?"string"==typeof t?new Date(t):t:new Date;this.opts.currentDate=e;var o=jQuery('<div class="title "></div>'),s=jQuery('<span class="year pt"></span>');s.html(this.getYear(e)+this.dates[0]);var n=jQuery('<span class="month pt"></span>');n.html(this.getMonth(e)+1+this.dates[1]);var r=jQuery('<span class="day pt"></span>');r.html(this.getDay(e)+this.dates[2]),o.append(s).append(n).append(r);var i=this;return s.click(function(){i.renderYearContent()}),n.click(function(){i.renderMonthContent()}),r.click(function(){var t=new Date;i.opts.currentDate=t,i.renderContent(i.opts.currentDate)}),o},xDate.prototype.renderHeader=function(){var t=this,e=jQuery('<div class="header" ></div>'),o=jQuery('<span class="left pt"></span>'),s=jQuery('<span class="content"></span>');this.eles.$headerContent=s,this.opts.currentDate=new Date(this.getValue());var n=jQuery('<span class="right pt"></span>');o.click(function(){"month"==t.opts.status?t.divMonth(1):"year"==t.opts.status&&t.divYear()}),n.click(function(){"month"==t.opts.status?t.addMonth(1):"year"==t.opts.status&&t.addYear()}),e.append(o),e.append(s),e.append(n),this.eles.$date.append(e)},xDate.prototype.setTitle=function(){this.eles.$headerContent.empty(),this.eles.$headerContent.html(this.getCurrentDateText(this.opts.currentDate))},xDate.prototype.addYear=function(){var t=25,e=this.getYear(this.opts.currentDate);e+=t,this.opts.currentDate.setFullYear(e),this.renderYearContent()},xDate.prototype.divYear=function(){var t=25,e=this.getYear(this.opts.currentDate);e-=t,this.opts.currentDate.setFullYear(e),this.renderYearContent()},xDate.prototype.addMonth=function(t){var e=this.getYear(this.opts.currentDate),o=this.getMonth(this.opts.currentDate);this.getDay(this.opts.currentDate);11==o?(e+=1,o=0):o+=t||1;var s=new Date(e,o,1);this.opts.currentDate=s,this.renderContent(this.opts.currentDate),this.setTitle()},xDate.prototype.divMonth=function(t){var e=this.getYear(this.opts.currentDate),o=this.getMonth(this.opts.currentDate);this.getDay(this.opts.currentDate);0==o?(e-=1,o=11):o-=t||1;var s=new Date(e,o,1);this.opts.currentDate=s,this.renderContent(this.opts.currentDate),this.setTitle()},xDate.prototype.removeAllEles=function(){this.eles.$content&&this.eles.$content.remove(),this.eles.$monthContent&&this.eles.$monthContent.remove(),this.eles.$yearContent&&this.eles.$yearContent.remove()},xDate.prototype.renderYearContent=function(){this.removeAllEles(),this.opts.status="year";var t=this,e=this.eles.$yearContent;e&&e.remove(),e=jQuery('<div class="yearContent"></div>');for(var o=jQuery("<ul></ul>"),s=this.opts.currentDate,n=this.getYear(s),r=n-12;r<n+13;r++){var i=jQuery("<li></li>");i.html(r),o.append(i),r==n&&i.addClass("active"),function(o,s){o.click(function(){t.opts.currentDate.setFullYear(s),t.eles.$monthContent&&t.eles.$monthContent.show(),e.remove(),t.renderContent(t.opts.currentDate)})}(i,r)}e.append(o),e.show(),this.eles.$yearContent=e,this.eles.$date.append(e),this.eles.$content&&this.eles.$content.hide(),this.eles.$monthContent&&this.eles.$monthContent.hide(),t.setTitle()},xDate.prototype.renderMonthContent=function(){this.removeAllEles();var t=this,e=this.eles.$monthContent;e&&e.remove(),e=jQuery('<div class="monthContent"></div>');for(var o=jQuery("<ul></ul>"),s=this.opts.currentDate,n=this.getMonth(s),r=0;r<12;r++){var i=jQuery("<li></li>");i.html(r+1),o.append(i),r==n&&i.addClass("active"),function(o,s){o.click(function(){t.opts.currentDate.setMonth(s),e.remove(),t.renderContent(t.opts.currentDate)})}(i,r)}e.append(o),e.show(),this.eles.$monthContent=e,this.eles.$date.append(e),this.eles.$content&&this.eles.$content.hide(),this.eles.$yearContent&&this.eles.$yearContent.hide()},xDate.prototype.renderContent=function(t){this.removeAllEles(),this.opts.status="month";var e=this;this.eles.$content&&this.eles.$content.empty();var o=jQuery('<div class="content"></div>');this.eles.$content=o;var s=jQuery("<ul></ul>"),t="string"==typeof t&&t?new Date(t):t||new Date;this.opts.currentDate=t;for(var n=(this.getWeek(t),this.getYear(t)),r=this.getMonth(t),i=this.getDay(t),a=this.getDayArray(n,r),l=0;l<this.weeks.length;l++){var h=jQuery("<li></li>");h.html(this.weeks[l]),s.append(h)}for(var l=0;l<a.length;l++){var h=jQuery("<li></li>"),u=a[l],p=u.value,c=h;h.html(u.day),s.append(h),h.removeClass("currentDay"),u.isCurrentMonth&&i==u.day?h.addClass("currentDay"):u.isCurrentMonth||h.addClass("isNotCurrentMonth"),function(o,s){s.click(function(s){e.setValue(o),e.hide(),e.opts.currentDate=t})}(p,c)}o.append(s),this.eles.$date.append(o),this.setTitle()},xDate.prototype.renderFooter=function(){},xDate.prototype.formatDate=function(t){return this.getYear(t)+"-"+(this.getMonth(t)+1)+"-"+this.getDay(t)},xDate.prototype.renderYear=function(){},xDate.prototype.getDayArray=function(t,e){for(var o=new Date(t,e,1),s=this.getWeek(o),n=this.getMaxDays(0==e?t-1:t,0==e?11:e-1),r=[],i=n+1+(0==s?-6:1-s);i<n+1;i++)r.push({day:i,isCurrentMonth:!1,value:(0==e?t-1:t)+"-"+(0==e?12:e)+"-"+i});for(var a=this.getMaxDays(t,e),i=1;i<=a;i++)r.push({day:i,isCurrentMonth:!0,value:t+"-"+(e+1)+"-"+i});for(var i=1;i<32&&r.length%7!=0;i++)r.push({day:i,isCurrentMonth:!1,value:(e+2==13?t+1:t)+"-"+(e+2==13?1:e+2)+"-"+i});return r},xDate.prototype.renderMonth=function(){},xDate.prototype.renderDay=function(){},xDate.prototype.setValue=function(t){return this.eles.$text.val(t)},xDate.prototype.getValue=function(){return this.eles.$text.val()},xDate.prototype.getMaxDays=function(t,e){return new Date(t,e+1,0).getDate()},xDate.prototype.getWeek=function(t){return t.getDay()},xDate.prototype.getMonth=function(t){return t.getMonth()},xDate.prototype.getYear=function(t){return t.getFullYear()},xDate.prototype.getDay=function(t){return t.getDate()},"undefined"==typeof window.xUi&&(window.xUi={}),window.xUi.date=function(){var t=[],e={get:function(e){if("number"==typeof e)return t[e];if("string"==typeof e)e=jQuery(e);else for(var o=0;o<t.length;o++){var s=t[o];if(s.opts.selector&&jQuery(s.opts.selector)[0]==jQuery(e)[0])return s}return null},render:function(e,o){e||(e=".date"),o||(o={});jQuery(e).each(function(e){var s=jQuery(this),n={};for(var e in o)n.item=o[e];n.onSelect=s.attr("onSelect"),n.selector=s;var r=new xDate(n);t.push(r),r.render(n)})}};return e}();var xForm=function(t){var e={date:null,select:null,combo:null,autocomplete:null,checkbox:null,radio:null,init:function(){this.initUI("date"),this.initUI("select"),this.initUI("combo"),this.initUI("autocomplete"),this.initUI("checkbox"),this.initUI("radio"),this.initUI("month"),this.initUI("year")},initUI:function(t){this[t]="undefined"!=typeof xUi&&"undefined"!=typeof xUi[t]?xUi[t]:{render:function(){}},this[t].render&&this[t].render()},initControl:function(){},render:function(){this.init(),this.initControl()}};return e}(window);jQuery(function(){xForm.render()});var _getSelector=function(t){return"string"==typeof t?jQuery(t):t};xMonth.prototype.dates=["年","月","日"],xMonth.prototype.render=function(t){this.opts=t||{};var e=this,o=_getSelector(t.selector);this.eles.$selector=o,this.eles.$date=jQuery('<div class="body"></div>');var s,n,r=jQuery("input",o);r.size()>1?(r=jQuery('<input type="text" />'),s=jQuery("[dateType=year]",o)||jQuery(r)[0],n=jQuery("[dateType=month]",o)||jQuery(r)[1],s.attr("type","hidden"),n.attr("type","hidden")):(s=jQuery('<input type="hidden" />'),n=jQuery('<input type="hidden" />')),this.eles.$text=jQuery("input:first",o),this.eles.$text.attr("readonly","readonly"),this.opts.value&&this.setValue(this.opts.value),this.opts.value=this.opts.value||this.getValue(),this.eles.$date.click(function(t){t.stopPropagation()}),this.eles.$selector.append(this.eles.$date),o.click(function(t){var o=jQuery(this).attr("isShow");"Y"==o?e.hide():e.show(),t.stopPropagation()})},xMonth.prototype.show=function(){this.eles.$date.show(),this.opts.isOnly||this.renderHeader(),this.renderContent(this.getValue()),this.renderFooter(),this.eles.$selector.attr("isShow","Y")},xMonth.prototype.hide=function(){this.eles.$date.empty(),this.eles.$date.hide(),this.eles.$selector.attr("isShow","N")},xMonth.prototype.getCurrentDateText=function(t){var e=t?"string"==typeof t?new Date(t):t:new Date;this.opts.currentDate=e;var o=jQuery('<div class="title "></div>'),s=jQuery('<span class="year pt"></span>');s.html(this.getYear(e)+this.dates[0]);var n=jQuery('<span class="month pt"></span>');n.html(this.getMonth(e)+1+this.dates[1]);var r=this;return s.click(function(){r.renderYearContent()}),n.click(function(){r.renderMonthContent()}),o.append(s),o.append(n),o},xMonth.prototype.renderHeader=function(){var t=this,e=jQuery('<div class="header" ></div>'),o=jQuery('<span class="left pt"></span>'),s=jQuery('<span class="content"></span>');this.eles.$headerContent=s,this.opts.currentDate=new Date(this.getValue());var n=jQuery('<span class="right pt"></span>');o.click(function(){"month"==t.opts.status?t.divMonth(1):"year"==t.opts.status&&t.divYear()}),n.click(function(){"month"==t.opts.status?t.addMonth(1):"year"==t.opts.status&&t.addYear()}),e.append(o),e.append(s),e.append(n),this.eles.$date.append(e)},xMonth.prototype.setTitle=function(){this.opts.isOnly||(this.eles.$headerContent.empty(),this.eles.$headerContent.html(this.getCurrentDateText(this.opts.currentDate)))},xMonth.prototype.addYear=function(){var t=25,e=this.getYear(this.opts.currentDate);e+=t,this.opts.currentDate.setFullYear(e),this.renderYearContent()},xMonth.prototype.divYear=function(){var t=25,e=this.getYear(this.opts.currentDate);e-=t,this.opts.currentDate.setFullYear(e),this.renderYearContent()},xMonth.prototype.removeAllEles=function(){this.eles.$monthContent&&this.eles.$monthContent.remove(),this.eles.$yearContent&&this.eles.$yearContent.remove()},xMonth.prototype.renderYearContent=function(){this.removeAllEles(),this.opts.status="year";var t=this,e=this.eles.$yearContent;e&&e.remove(),e=jQuery('<div class="yearContent"></div>');for(var o=jQuery("<ul></ul>"),s=this.opts.currentDate,n=this.getYear(s),r=n-12;r<n+13;r++){var i=jQuery("<li></li>");i.html(r),o.append(i),r==n&&i.addClass("active"),function(o,s){o.click(function(){t.opts.currentDate.setFullYear(s),t.eles.$monthContent&&t.eles.$monthContent.show(),e.remove(),t.renderContent(t.opts.currentDate)})}(i,r)}e.append(o),e.show(),this.eles.$yearContent=e,this.eles.$date.append(e),this.eles.$content&&this.eles.$content.hide(),this.eles.$monthContent&&this.eles.$monthContent.hide(),t.setTitle()},xMonth.prototype.renderMonthContent=function(){this.removeAllEles();var t=this,e=this.eles.$monthContent;e&&e.remove(),e=jQuery('<div class="monthContent"></div>');for(var o=jQuery("<ul></ul>"),s=this.opts.currentDate,n=this.getMonth(s),r=0;r<12;r++){var i=jQuery("<li></li>");i.html(r+1),o.append(i),r==n&&i.addClass("active"),function(e,o){e.click(function(){t.opts.currentDate.setMonth(o),t.setTitle(),e.siblings().removeClass("active"),e.addClass("active");var s=t.opts.isOnly?t.getMonth(t.opts.currentDate)+1:t.formatDate(t.opts.currentDate);t.setValue(s),t.hide()})}(i,r)}e.append(o),e.show(),this.eles.$monthContent=e,this.eles.$date.append(e),this.eles.$content&&this.eles.$content.hide(),this.eles.$yearContent&&this.eles.$yearContent.hide()},xMonth.prototype.renderContent=function(t){this.removeAllEles(),this.opts.status="year";var t="string"==typeof t&&t?new Date(t):t||new Date;this.opts.currentDate=t,this.renderMonthContent(),this.setTitle()},xMonth.prototype.renderFooter=function(){},xMonth.prototype.formatDate=function(t){return this.getYear(t)+"-"+(this.getMonth(t)+1)},xMonth.prototype.setValue=function(t){return this.eles.$text.val(t)},xMonth.prototype.getValue=function(){return this.eles.$text.val()},xMonth.prototype.getMonth=function(t){return t.getMonth()},xMonth.prototype.getYear=function(t){return t.getFullYear()},"undefined"==typeof window.xUi&&(window.xUi={}),window.xUi.month=function(){var t=[],e={get:function(e){if("number"==typeof e)return t[e];if("string"==typeof e)e=jQuery(e);else for(var o=0;o<t.length;o++){var s=t[o];if(s.opts.selector&&jQuery(s.opts.selector)[0]==jQuery(e)[0])return s}return null},render:function(e,o){e||(e=".month"),o||(o={});jQuery(e).each(function(e){var s=jQuery(this),n={};for(var e in o)n.item=o[e];n.onSelect=s.attr("onSelect"),n.isOnly=s.attr("isOnly"),n.selector=s;var r=new xMonth(n);t.push(r),r.render(n)})}};return e}(),xPupSelect.prototype.render=function(t){t.tField,t.vField},xPupSelect.prototype.getValue=function(){},xPupSelect.prototype.setValue=function(t){},xPupSelect.prototype.renderItem=function(t){},xPupSelect.prototype.onItemClick=function(){},xPupSelect.prototype.loadData=function(){},xPupSelect.prototype.refresh=function(t){},xRadio.prototype.render=function(t){var e=this;this.opts=t||this.opts;var o=t.selector;this.eles.$selector=o,this.eles.$radio=jQuery(">label>input[type=radio]",o),this.eles.$label=jQuery(">label:first",o),this.opts.isChceked=this.eles.$radio.is(":checked"),this.eles.$radio.click(function(t){e.setValue(),t.stopPropagation()}),this.setValue()},xRadio.prototype.getValue=function(){return this.eles.$radio.is(":checked")},xRadio.prototype.setValue=function(t){t?this.eles.$radio.each(function(){var e=jQuery(this).val();jQuery(this).prop("checked",!1),jQuery(this).parent().removeClass("checked"),t==e&&(jQuery(this).prop("checked",!0),jQuery(this).parent().addClass("checked"))}):(t=[],this.eles.$radio.each(function(){var e=jQuery(this).is(":checked");if(jQuery(this).prop("checked",!1),jQuery(this).parent().removeClass("checked"),e){var o=jQuery(this).val();jQuery(this).prop("checked",!0),t.push(o),jQuery(this).parent().addClass("checked")}}),t=t.join(",")),console&&console.log&&console.log("xform radio value:"+t),this.onSelect(t)},xRadio.prototype.onSelect=function(item){var onSelect=this.opts.onSelect;"function"==typeof this.opts.onSelect?this.opts.onSelect.call(this,me.getValue()):onSelect&&eval(onSelect+".call(this,this.getValue())")},"undefined"==typeof window.xUi&&(window.xUi={}),window.xUi.radio=function(){var t=[],e={get:function(e){if("number"==typeof e)return t[e];if("string"==typeof e)e=jQuery(e);else for(var o=0;o<t.length;o++){var s=t[o];if(s.opts.selector&&jQuery(s.opts.selector)[0]==jQuery(e)[0])return s}return null},render:function(e,o){e||(e=".radio"),o||(o={});jQuery(e).each(function(e){var s=jQuery(this),n={};for(var e in o)n.item=o[e];n.onSelect=s.attr("onSelect"),n.selector=s;var r=new xRadio(n);t.push(r),r.render(n)})}};return e}(),xSelect.prototype.hide=function(){this.onHide(),this.eles.$ul.hide()},xSelect.prototype.show=function(){this.parentFilter(),this.onShow(),this.eles.$ul.show()},xSelect.prototype.render=function(t){var e=this,o=t.selector;t.onShow||function(){},t.onHide||function(){};this.opts=t;var s=o,n=jQuery(">ul",s);this.eles.$ul=n,this.eles.$selector=s;var r=jQuery(">li",n),i=jQuery(">input",s),a=s.attr("rendered");if("Y"!=a){this.eles.$text=i;var l=jQuery('<input type="hidden" />');this.eles.$hValue=l;var h=i.attr("name");h&&(l.attr("name",h),i.attr("name",h+"Desc")),s.append(l),n.css("top",s.height()+2+"px");var u=i.val()||s.attr("value");if(s.attr("rendered","Y"),void 0==u||""==u){var p=jQuery(">li[isSelected=Y]",n);if(p.size()>0){var c=0==p.attr("value")?p.text():p.attr("value");p.attr("value")!=c&&p.attr("value",c),u=c}}e.setValue(u,!0),s.on("click",function(t){var o=n.is(":visible");o?e.hide():e.show(),t.stopPropagation()}),r.on("click",function(t){var o=0==jQuery(this).attr("value")?jQuery(this).text():jQuery(this).attr("value"),s=e.getValue();s!=o&&(jQuery(this).attr("value")!=o&&jQuery(this).attr("value",o),e.setValue(o),e.hide(),t.stopPropagation())})}},xSelect.prototype.refresh=function(){},xSelect.prototype.filter=function(){},xSelect.prototype.setSubValue=function(){this.opts.subSelect&&this.opts.subSelect.setValue("")},xSelect.prototype.parentFilter=function(){if(this.opts.parentSelect){var t=this.opts.parentSelect.getValue();jQuery(">li",this.eles.$ul).hide(),jQuery(">li["+this.opts.pField+"="+t+"]",this.eles.$ul).show()}},xSelect.prototype.getValue=function(){return this.eles.$hValue.val()},xSelect.prototype.getText=function(){return this.eles.$text.val()},xSelect.prototype.onShow=function(){var onShow=this.opts.onShow;onShow&&eval(onShow+".call(this)")},xSelect.prototype.onHide=function(){var onHide=this.opts.onHide;onHide&&eval(onHide+".call(this)")},xSelect.prototype.setValue=function(t){var e=this.eles.$selector,o=jQuery(">ul",e),s=(jQuery(">li",o),jQuery(">input:first",e)),n=jQuery(">input[type=hidden]",e),r=jQuery(">li[value="+t+"]",o).text();r?(s.val(r),n.val(t)):(s.val(t),n.val(t)),this.onSelect(),this.setSubValue()},xSelect.prototype.onSelect=function(){var onSelect=this.opts.onSelect;"function"==typeof this.opts.onSelect?this.opts.onSelect.call(this,me.getValue(),me.getText()):onSelect&&eval(onSelect+".call(this,this.getValue(),this.getText())")},xSelect.prototype.onItemClick=function(){},"undefined"==typeof window.xUi&&(window.xUi={}),window.xUi.select=function(t){var e=[],o={get:function(t){if("number"==typeof t)return e[t];if("string"==typeof t)t=jQuery(t);else for(var o=0;o<e.length;o++){var s=e[o];if(s.opts.selector&&jQuery(s.opts.selector)[0]==jQuery(t)[0])return s}return null},getSubSelect:function(t){return $subNode=jQuery(".select[pId="+t.attr("id")+"]"),this.get($subNode)},getParentSelect:function(t){$parentNode=jQuery(".select[id="+t.attr("pId")+"]");var e=this.get($parentNode);return e&&(e.opts.subSelect=this.get(t)),e},render:function(t,o){t||(t=".select"),o||(o={});var s=this;jQuery(t).each(function(t){var n=jQuery(this),r={};r.pField=n.attr("pField"),r.onShow=n.attr("onShow"),r.onHide=n.attr("onHide"),r.onSelect=n.attr("onSelect"),r.selector=n;for(var t in o)r.item=o[t];var i=new xSelect(r);e.push(i),i.render(r),r.subSelect=s.getSubSelect(n),r.parentSelect=s.getParentSelect(n)})}};return o}(window);var xFormUtils=function(){var t={call:function(){},getSelector:function(t){}};return t}(),_getSelector=function(t){return"string"==typeof t?jQuery(t):t};xYear.prototype.dates=["年","月","日"],xYear.prototype.render=function(t){this.opts=t||{};var e=this,o=_getSelector(t.selector);this.eles.$selector=o,this.eles.$date=jQuery('<div class="body"></div>');var s,n,r=jQuery("input",o);r.size()>1?(r=jQuery('<input type="text" />'),
s=jQuery("[dateType=year]",o)||jQuery(r)[0],n=jQuery("[dateType=month]",o)||jQuery(r)[1],s.attr("type","hidden"),n.attr("type","hidden")):(s=jQuery('<input type="hidden" />'),n=jQuery('<input type="hidden" />')),this.eles.$text=jQuery("input:first",o),this.eles.$text.attr("readonly","readonly"),this.opts.value&&this.setValue(this.opts.value),this.opts.value=this.opts.value||this.getValue(),this.eles.$date.click(function(t){t.stopPropagation()}),this.eles.$selector.append(this.eles.$date),o.click(function(t){var o=jQuery(this).attr("isShow");"Y"==o?e.hide():e.show(),t.stopPropagation()})},xYear.prototype.show=function(){this.eles.$date.show(),this.opts.isOnly||this.renderHeader(),this.renderContent(this.getValue()),this.renderFooter(),this.eles.$selector.attr("isShow","Y")},xYear.prototype.hide=function(){this.eles.$date.empty(),this.eles.$date.hide(),this.eles.$selector.attr("isShow","N")},xYear.prototype.getCurrentDateText=function(t){var e=t?"string"==typeof t?new Date(t):t:new Date;this.opts.currentDate=e;var o=jQuery('<div class="title "></div>'),s=jQuery('<span class="year pt"></span>');s.html(this.getYear(e)+this.dates[0]);var n=jQuery('<span class="month pt"></span>');n.html(this.getMonth(e)+1+this.dates[1]);var r=this;return s.click(function(){r.opts.currentDate=new Date,r.renderYearContent()}),o.append(s),o},xYear.prototype.renderHeader=function(){var t=this,e=jQuery('<div class="header" ></div>'),o=jQuery('<span class="left pt"></span>'),s=jQuery('<span class="content"></span>');this.eles.$headerContent=s,this.opts.currentDate=new Date(this.getValue());var n=jQuery('<span class="right pt"></span>');o.click(function(){"month"==t.opts.status?t.divMonth(1):"year"==t.opts.status&&t.divYear()}),n.click(function(){"month"==t.opts.status?t.addMonth(1):"year"==t.opts.status&&t.addYear()}),e.append(o),e.append(s),e.append(n),this.eles.$date.append(e)},xYear.prototype.setTitle=function(){this.opts.isOnly||(this.eles.$headerContent.empty(),this.eles.$headerContent.html(this.getCurrentDateText(this.opts.currentDate)))},xYear.prototype.addYear=function(){var t=25,e=this.getYear(this.opts.currentDate);e+=t,this.opts.currentDate.setFullYear(e),this.renderYearContent()},xYear.prototype.divYear=function(){var t=25,e=this.getYear(this.opts.currentDate);e-=t,this.opts.currentDate.setFullYear(e),this.renderYearContent()},xYear.prototype.removeAllEles=function(){this.eles.$monthContent&&this.eles.$monthContent.remove(),this.eles.$yearContent&&this.eles.$yearContent.remove()},xYear.prototype.renderYearContent=function(){this.removeAllEles(),this.opts.status="year";var t=this,e=this.eles.$yearContent;e&&e.remove(),e=jQuery('<div class="yearContent"></div>');for(var o=jQuery("<ul></ul>"),s=this.opts.currentDate,n=this.getYear(s),r=n-12;r<n+13;r++){var i=jQuery("<li></li>");i.html(r),o.append(i),r==n&&i.addClass("active"),function(e,o){e.click(function(){t.opts.currentDate.setFullYear(o),t.setValue(t.getYear(t.opts.currentDate)),t.hide()})}(i,r)}e.append(o),e.show(),this.eles.$yearContent=e,this.eles.$date.append(e),this.eles.$content&&this.eles.$content.hide(),this.eles.$monthContent&&this.eles.$monthContent.hide(),t.setTitle()},xYear.prototype.renderContent=function(t){this.removeAllEles(),this.opts.status="year";var t="string"==typeof t&&t?new Date(t):t||new Date;this.opts.currentDate=t,this.renderYearContent(),this.setTitle()},xYear.prototype.formatDate=function(t){return this.getYear(t)+"-"+(this.getMonth(t)+1)},xYear.prototype.setValue=function(t){return this.eles.$text.val(t)},xYear.prototype.getValue=function(){return this.eles.$text.val()},xYear.prototype.getMonth=function(t){return t.getMonth()},xYear.prototype.getYear=function(t){return t.getFullYear()},"undefined"==typeof window.xUi&&(window.xUi={}),window.xUi.year=function(){var t=[],e={get:function(e){if("number"==typeof e)return t[e];if("string"==typeof e)e=jQuery(e);else for(var o=0;o<t.length;o++){var s=t[o];if(s.opts.selector&&jQuery(s.opts.selector)[0]==jQuery(e)[0])return s}return null},render:function(e,o){e||(e=".year"),o||(o={});jQuery(e).each(function(e){var s=jQuery(this),n={};for(var e in o)n.item=o[e];n.onSelect=s.attr("onSelect"),n.isOnly=s.attr("isOnly"),n.selector=s;var r=new xYear(n);t.push(r),r.render(n)})}};return e}();